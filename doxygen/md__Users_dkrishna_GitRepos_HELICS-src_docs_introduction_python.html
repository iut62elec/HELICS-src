<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>helics: Python Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HELICS_48x48.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">helics
   &#160;<span id="projectnumber">1.0.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Python Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In the previous section, we covered the basics of a HELICS federate and how you can run multiple federates together to form a federation. In this section we will look at how to create a federation in Python. We will create a simple <code>pi-exchange</code> federation in Python with 2 federates.</p>
<p><b>HELICS Python Setup</b></p>
<p>Before we run the Python <code>pi-exchange</code> federation, it is necessary to ensure that we have Python installed and that we have the HELICS Python built successfully and correctly on the machine.</p>
<p>We recommend using Anaconda3/Miniconda3, although this should work with most versions of Python. To make an interface that is similar across different languages, we use SWIG to generate the Python bindings to the <code>helicsSharedLib</code> shared library. SWIG claims to be compatible with most Python versions, dating back to Python 2.0. And recommends that for the best results, one should consider using Python 2.3 or newer.</p>
<p>Installation of HELICS on a Mac can be done using <code>brew</code> which comes with the ability to build the Python extension as well. HELICS can also be built from source and linked with the required Python version. See the page on the Installation instructions for more information regarding this.</p>
<p><b>Create a federations directory</b></p>
<p>Linux and Mac:</p>
<div class="fragment"><div class="line">$ mkdir -p ~/federations/pi-exchange</div><div class="line">$ cd ~/federations/pi-exchange</div></div><!-- fragment --><p>Windows CMD:</p>
<div class="fragment"><div class="line">&gt; mkdir %USERPROFILE%\federations</div><div class="line">&gt; cd %USERPROFILE%\federations</div><div class="line">&gt; mkdir pi-exchange</div><div class="line">&gt; cd pi-exchange</div></div><!-- fragment --><p><b>Writing the Python federation</b></p>
<p>Next, make a new source file and call it <code>pisender.py</code>. Copy the contents from <a href="https://github.com/GMLC-TDC/HELICS-src/blob/develop/examples/python/pi-exchange/pisender.py">pisender.py</a> and paste it into the file.</p>
<p>Next, create a new source file and call it <code>hello_world_receiver.c</code>. Copy the contents from <a href="https://github.com/GMLC-TDC/HELICS-src/blob/develop/examples/python/pi-exchange/pireceiver.py">pireceiver.py</a> and paste it into the file.</p>
<p>Save the files.</p>
<p><b>Running a federation</b></p>
<p>Linux and Mac:</p>
<p>Next, open two terminals. In the first terminal, run the following command.</p>
<div class="fragment"><div class="line">$ python pisender.py</div></div><!-- fragment --><p>In a second terminal, run the following command.</p>
<div class="fragment"><div class="line">$ python pireceiver.py</div></div><!-- fragment --><p>If done correctly, you should see an output like so:</p>
<div class="image">
<img src="../img/python-example.png" alt="Python Example"/>
</div>
<p>You should see something like the following in the PI RECEIVER window (2nd one in directions above)</p>
<div class="fragment"><div class="line">$ python pireceiver.py</div><div class="line">PI RECEIVER: Helics version = 1.0.0.alpha (01-18-18)</div><div class="line">PI RECEIVER: Creating Federate Info</div><div class="line">PI RECEIVER: Setting Federate Info Name</div><div class="line">PI RECEIVER: Setting Federate Info Core Type</div><div class="line">PI RECEIVER: Setting Federate Info Init String</div><div class="line">PI RECEIVER: Setting Federate Info Time Delta</div><div class="line">PI RECEIVER: Setting Federate Info Logging</div><div class="line">PI RECEIVER: Creating Value Federate</div><div class="line">PI RECEIVER: Value federate created</div><div class="line">PI RECEIVER: Subscription registered</div><div class="line">PI RECEIVER: Entering execution mode</div><div class="line">PI RECEIVER: Current time is 5.0</div><div class="line">PI RECEIVER: Received value = 3.142857142857143 at time 5.0 from PI SENDER</div><div class="line">PI RECEIVER: Received value = 3.142857142857143 at time 6.0 from PI SENDER</div><div class="line">PI RECEIVER: Received value = 3.142857142857143 at time 7.0 from PI SENDER</div><div class="line">PI RECEIVER: Received value = 3.142857142857143 at time 8.0 from PI SENDER</div><div class="line">PI RECEIVER: Received value = 3.142857142857143 at time 9.0 from PI SENDER</div><div class="line">PI RECEIVER: Federate finalized</div><div class="line">end of master Object Holder destructor</div></div><!-- fragment --><p>Corresponding output should appear from the PI SENDER (window 1).</p>
<p><b>Background:</b> Running a HELICS federation (via low level commands) requires first starting a helics broker and then running the desired set of federates with it. In this case, the pisender starts this broker and then joins as a federate.</p>
<p><b>Tips</b></p>
<p>Ensure that the install location is added to your <code>PATH</code>. If you've installed to the default installation, you may not need to do this. To ensure that the Python extension works correctly, you may add the following to your <code>PYTHONPATH</code>. You can do so by pasting the following in your .bashrc file.</p>
<div class="fragment"><div class="line">export PYTHONPATH=&quot;~/local/helics_install/python&quot;</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
