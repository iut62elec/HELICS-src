<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>helics: Mac Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HELICS_48x48.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">helics
   &#160;<span id="projectnumber">1.0.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Mac Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Install using brew </h2>
<h2>Requirements </h2>
<ul>
<li>brew</li>
</ul>
<p>Install <a href="https://brew.sh/">brew</a>. It is a package manager for MacOS.</p>
<p>Once you install brew, you can open a terminal and type the following.</p>
<div class="fragment"><div class="line">brew tap GMLC-TDC/helics</div><div class="line">brew install helics</div></div><!-- fragment --><p>OR</p>
<div class="fragment"><div class="line">brew install GMLC-TDC/helics/helics</div></div><!-- fragment --><p>If you want to install it with the Python extension, you can use the following.</p>
<div class="fragment"><div class="line">brew reinstall helics --with-python --with-python-include-dir=$(python3-config --prefix)/include/python3.6m/</div></div><!-- fragment --><p>You must pass <code>--with-python-include-dir</code> with a value. The easiest way to find out what the <code>--with-python-include-dir</code> argument should be is by using <code>python3-config</code> as shown above.</p>
<p>If you want to install using Python2 instead, you can use <code>--with-python-include-dir=$(python-config --prefix)/include/python2.7/</code>. It is important that the Python interpreter used to run <code>import helics</code> was built using the header files included in <code>python-config --prefix</code>. That is to say, you cannot build using Python3 and run using Python2.</p>
<p>Additionally, if required, you can add <code>--HEAD</code> to install from the latest <code>develop</code> branch.</p>
<h2>Install from source </h2>
<h2>Requirements </h2>
<ul>
<li>C++11 compiler (C++14 preferred).</li>
<li>CMake 3.4 or newer</li>
<li>git</li>
<li>Boost 1.58 or newer</li>
<li>ZeroMQ 4.1.4 or newer (if ZeroMQ support is needed)</li>
<li>[for future versions] OpenMPI v8 or newer (if MPI support is needed)</li>
</ul>
<h2>Setup </h2>
<p>To set up your environment:</p>
<ol type="1">
<li>(if needed) Install git on your system for easy access to the HELICS source. Download from <a href="https://git-scm.com/downloads">git-scm</a>. This installs the command line which is described here. GUI's interfaces such as <a href="https://www.sourcetreeapp.com/">SourceTree</a> are another option.</li>
<li>(if desired) Many required libraries are easiest installed using the <a href="https://brew.sh/">homebrew</a> package manager. These directions assume this approach, so unless you prefer to track these libraries and dependencies down yourself, install it if you don't have it yet.</li>
<li><p class="startli">(if needed) Setup a command-line compile environment</p>
<p class="startli">a) Install a C++11 compiler (C++14 preferred). e.g. <code>clang</code> from the Xcode command line tools. These can be installed from the command line in Terminal by typing <code>xcode-select --install</code> and following the on-screen prompts. b) Install cmake with <code>brew install cmake</code>. Alternately, a DMG file is available for cmake from their <a href="https://cmake.org/download/">website</a>.</p>
</li>
<li>Install most dependencies using homebrew.</li>
</ol>
<div class="fragment"><div class="line">brew install boost</div><div class="line">brew install zeromq</div><div class="line">brew install cmake</div></div><!-- fragment --><ol type="1">
<li>Make sure <em>cmake</em> and <em>git</em> are available in the Command Prompt with <code>which cmake</code> and <code>which git</code> If they aren't, add them to the system PATH variable.</li>
</ol>
<p>Getting and building from source:</p>
<ol type="1">
<li>Use <code>git clone</code> to to check out a copy of HELICS.</li>
<li>Create a build folder. Run cmake and give it the path that HELICS was checked out into.</li>
<li>Run <code>make</code>.</li>
</ol>
<div class="fragment"><div class="line">git clone https://github.com/GMLC-TDC/HELICS-src</div><div class="line">cd HELICS-src</div><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake ../</div><div class="line">ccmake . # optional, to change install path or other configuration settings</div><div class="line">make</div><div class="line">make install</div></div><!-- fragment --><h2>Testing </h2>
<p>A quick test is to double check the versions of the HELICS player and recorder:</p>
<div class="fragment"><div class="line">cd /path/to/helics_install/bin</div><div class="line"></div><div class="line">$ helics_player --version</div><div class="line">1.0.2 (04-28-18)</div><div class="line"></div><div class="line">$ helics_recorder --version</div><div class="line">1.0.2 (04-28-18)</div></div><!-- fragment --><h2>Building HELICS with python support </h2>
<p>Run the following:</p>
<div class="fragment"><div class="line">$ cmake -DBUILD_PYTHON_INTERFACE=ON -DPYTHON_INCLUDE_DIR=$(python3-config --prefix)/include/python3.6m/ -DPYTHON_LIBRARY=$(python3-config --prefix)/lib/python3.6m/libpython3.6m.dylib -DCMAKE_INSTALL_PREFIX=/Users/$(whoami)/local/helics-1.0.0/ ..</div><div class="line">$ make -j8</div><div class="line">$ make install</div></div><!-- fragment --><p>Add the following to your <code>~/.bashrc</code> file.</p>
<div class="fragment"><div class="line">export PYTHONPATH=/Users/$(whoami)/local/helics-1.0.0/python:$PYTHONPATH</div></div><!-- fragment --><p>If you open a interactive Python session and import helics, you should be able to get the version of <code>helics</code> and an output that is similar to the following.</p>
<div class="fragment"><div class="line">$ ipython</div><div class="line">Python 3.6.4 |Anaconda, Inc.| (default, Jan 16 2018, 12:04:33)</div><div class="line">Type &#39;copyright&#39;, &#39;credits&#39; or &#39;license&#39; for more information</div><div class="line">IPython 6.2.1 -- An enhanced Interactive Python. Type &#39;?&#39; for help.</div><div class="line"></div><div class="line">In [1]: import helics</div><div class="line"></div><div class="line">In [2]: helics.helicsGetVersion()</div><div class="line">Out[2]: &#39;1.0.2 (04-28-18)&#39;</div></div><!-- fragment --><h2>Building HELICS using gcc and python </h2>
<p>First you will need to build boost using gcc from source. Download <a href="http://www.boost.org/users/history/version_1_64_0.html">boost</a> from the boost.org website.</p>
<p>Unzip the folder boost_1_64_0 to any location, for example Downloads.</p>
<div class="fragment"><div class="line">$ cd ~/Downloads/boost_1_64_0</div><div class="line">$ ./bootstrap.sh --with-python=/Users/$USER/miniconda3/python3 --prefix=/usr/local/Cellar/gcc/7.2.0_1/bin/gcc-7</div><div class="line">$ ./bootstrap.sh --prefix=/ --prefix=/Users/$USER/local/boost-gcc-1.64</div><div class="line">$ ./b2</div><div class="line">$ ./b2 install</div><div class="line">$ # OR</div><div class="line">$ ./bjam cxxflags=&#39;-fPIC&#39; cflags=&#39;-fPIC&#39; -a link=static install # For static linking</div></div><!-- fragment --><p>This will install boost in the/local/boost-gcc-1.64 folder</p>
<p>Next, you will need to build HELICS and tell it what the BOOST_ROOT is.</p>
<div class="fragment"><div class="line">$ cmake -DCMAKE_INSTALL_PREFIX=&quot;/Users/$USER/local/helics-gcc-1.0.0/&quot; -DBOOST_ROOT=&quot;/Users/$USER/local/boost-gcc-1.64&quot; -DBUILD_PYTHON_INTERFACE=ON -DPYTHON_LIBRARY=$(python3-config --prefix)/lib/libpython3.6m.dylib -DPYTHON_INCLUDE_DIR=$(python3-config --prefix)/include/python3.6m -DCMAKE_C_COMPILER=/usr/local/Cellar/gcc/7.2.0_1/bin/gcc-7 -DCMAKE_CXX_COMPILER=/usr/local/Cellar/gcc/7.2.0_1/bin/g++-7 ../</div><div class="line">$ make clean; make -j 4; make install</div></div><!-- fragment --><h2>Building HELICS with MATLAB support </h2>
<p>To install HELICS with MATLAB support, you will need to add <code>BUILD_MATLAB_INTERFACE=ON</code>.</p>
<p>The important thing to note is that the MATLAB binaries are in the PATH. Specifically, <code>mex</code> must be available in the PATH.</p>
<div class="admonition note"></div><div class="admonition note">Note: To check if <code>mex</code> is in the PATH, type <code>which mex</code> and see if it returns a PATH to the <code>mex</code> compiler</div><div class="admonition note"></div><div class="fragment"><div class="line">git clone https://github.com/GMLC-TDC/HELICS-src</div><div class="line">cd HELICS-src</div><div class="line">mkdir build-osx</div><div class="line">cd build-osx</div><div class="line">cmake -DBUILD_MATLAB_INTERFACE=ON -DCMAKE_INSTALL_PREFIX=/Users/$(whoami)/local/helics-develop/ ..</div><div class="line">make -j8</div><div class="line">make install</div></div><!-- fragment --><p>If you have changed the C-interface, and want to regenerate the SWIG MATLAB bindings, you will need to use a custom version of SWIG to build the MATLAB interface. To do that, you can follow the following instructions.</p>
<ul>
<li>Install <a href="https://github.com/jaeandersson/swig/">SWIG with MATLAB</a></li>
<li><code>./configure --prefix=/Users/$USER/local/swig_install; make; make install;</code></li>
<li>Ensure that SWIG and MATLAB are in the PATH</li>
</ul>
<p>The below generates the MATLAB interface using SWIG.</p>
<div class="fragment"><div class="line">cd ~/GitRepos/GMLC-TDC/HELICS-src/swig/</div><div class="line">mkdir matlab</div><div class="line">swig -I../src/helics/shared_api_library -outdir ./matlab -matlab ./helics.i</div><div class="line">mv helics_wrap.cxx matlab/helicsMEX.cxx</div></div><!-- fragment --><p>You can copy these files into the respective <code>HELICS-src/swig/matlab/</code> folder and run the cmake command above. Alternatively, you wish to build the MATLAB interface without using CMake, and you can do the following.</p>
<div class="fragment"><div class="line">cd ~/GitRepos/GMLC-TDC/HELICS-src/swig/</div><div class="line">mex -I../src/helics/shared_api_library ./matlab/helics_wrap.cxx -lhelicsSharedLib -L/path/to/helics_install/lib/helics/</div><div class="line">mv helicsMEX.* matlab/</div></div><!-- fragment --><h2>Test HELICS MATLAB extension</h2>
<p>To run the MATLAB HELICS extension, one would have to load the <code>helicsSharedLib</code> in the MATLAB file. You can modify the first line of the files listed below to point them to your current <code>helicsSharedLib</code> install.</p>
<p>Run the following in two separate windows.</p>
<div class="fragment"><div class="line">matlab -nodesktop -nosplash</div><div class="line">cd ~/GitRepos/GMLC-TDC/HELICS-src/swig/matlab</div><div class="line">pireceiver</div></div><!-- fragment --><div class="fragment"><div class="line">matlab -nodesktop -nosplash</div><div class="line">cd ~/GitRepos/GMLC-TDC/HELICS-src/swig/matlab</div><div class="line">pisender</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
